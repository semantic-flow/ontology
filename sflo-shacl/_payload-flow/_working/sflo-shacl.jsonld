{
  "@context": {
    "@base": "https://semantic-flow.github.io/ontology/semantic-flow-shacl/",
    "owl": "http://www.w3.org/2002/07/owl#",
    "vann": "http://purl.org/vocab/vann/",
    "sh": "http://www.w3.org/ns/shacl#",
    "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
    "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
    "xsd": "http://www.w3.org/2001/XMLSchema#",
    "dcat": "http://www.w3.org/ns/dcat#",
    "dcterms": "http://purl.org/dc/terms/",
    "formats": "http://www.w3.org/ns/formats/",
    "sflo": "https://semantic-flow.github.io/ontology/semantic-flow-ontology/"
  },
  "@graph": [
    {
      "@id": "",
      "@type": "owl:Ontology",
      "dcterms:title": "Semantic Flow SHACL Shapes",
      "dcterms:description": "SHACL shapes for validating Semantic Flow data structures and operational invariants.",
      "vann:preferredNamespacePrefix": "sflo-shacl",
      "vann:preferredNamespaceUri": "https://semantic-flow.github.io/ontology/semantic-flow-shacl/"
    },
    {
      "@id": "DenotesSubjectShape/",
      "@type": "sh:NodeShape",
      "rdfs:label": "denotes subject typing",
      "rdfs:comment": "Ensures sflo:denotes is asserted only on sflo:NomenHandle subjects.",
      "sh:targetSubjectsOf": {
        "@id": "sflo:denotes/"
      },
      "sh:class": {
        "@id": "sflo:NomenHandle/"
      },
      "sh:message": "Subjects of sflo:denotes must be typed sflo:NomenHandle."
    },
    {
      "@id": "FlowStructureShape/",
      "@type": "sh:NodeShape",
      "rdfs:label": "Flow structure constraints",
      "sh:targetClass": {
        "@id": "sflo:Flow/"
      },
      "sh:property": [
        {
          "sh:path": {
            "@id": "sflo:hasSlice/"
          },
          "sh:minCount": 1,
          "sh:severity": {
            "@id": "sh:Warning"
          },
          "sh:message": "A Flow SHOULD have at least one sflo:hasSlice."
        },
        {
          "sh:path": {
            "@id": "sflo:currentSlice/"
          },
          "sh:maxCount": 1,
          "sh:severity": {
            "@id": "sh:Violation"
          },
          "sh:message": "A Flow SHOULD have at most one sflo:currentSlice."
        }
      ]
    },
    {
      "@id": "SliceAbstractFileShape/",
      "@type": "sh:NodeShape",
      "rdfs:label": "Slice file presence",
      "sh:targetClass": {
        "@id": "sflo:Slice/"
      },
      "sh:property": {
        "sh:path": {
          "@id": "sflo:hasAbstractFile/"
        },
        "sh:minCount": 1,
        "sh:severity": {
          "@id": "sh:Warning"
        },
        "sh:message": "A Slice SHOULD have at least one sflo:hasAbstractFile."
      }
    },
    {
      "@id": "KnopStructureSanityShape/",
      "@type": "sh:NodeShape",
      "rdfs:label": "Knop structure sanity",
      "sh:targetClass": {
        "@id": "sflo:Knop/"
      },
      "sh:property": [
        {
          "sh:path": {
            "@id": "sflo:hasKnopMetadataFlow/"
          },
          "sh:minCount": 1,
          "sh:maxCount": 1,
          "sh:severity": {
            "@id": "sh:Warning"
          },
          "sh:message": "A Knop SHOULD have exactly one sflo:hasKnopMetadataFlow."
        }
      ]
    },
    {
      "@id": "KnopComponentContainmentShape/",
      "@type": "sh:NodeShape",
      "rdfs:label": "KnopComponent containment",
      "sh:targetClass": {
        "@id": "sflo:KnopComponent/"
      },
      "sh:property": {
        "sh:path": {
          "sh:inversePath": {
            "@id": "sflo:hasKnopComponent/"
          }
        },
        "sh:minCount": 1,
        "sh:maxCount": 1,
        "sh:severity": {
          "@id": "sh:Violation"
        },
        "sh:message": "A KnopComponent MUST be contained by exactly one Knop via sflo:hasKnopComponent."
      }
    },
    {
      "@id": "AbstractFileContainmentShape/",
      "@type": "sh:NodeShape",
      "rdfs:label": "AbstractFile containment",
      "sh:targetClass": {
        "@id": "sflo:AbstractFile/"
      },
      "sh:property": {
        "sh:path": {
          "sh:inversePath": {
            "@id": "sflo:hasAbstractFile/"
          }
        },
        "sh:minCount": 1,
        "sh:maxCount": 1,
        "sh:severity": {
          "@id": "sh:Violation"
        },
        "sh:message": "An AbstractFile MUST be contained by exactly one container via sflo:hasAbstractFile."
      }
    }
  ]
}
