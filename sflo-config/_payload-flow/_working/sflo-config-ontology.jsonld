{
  "@context": {
    "@base": "https://semantic-flow.github.io/ontology/sflo-config/",
    "owl": "http://www.w3.org/2002/07/owl#",
    "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
    "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
    "xsd": "http://www.w3.org/2001/XMLSchema#",
    "sh": "http://www.w3.org/ns/shacl#",
    "dcterms": "http://purl.org/dc/terms/",
    "schema": "https://schema.org/",
    "formats": "http://www.w3.org/ns/formats/",
    "vann": "http://purl.org/vocab/vann/",
    "sflo": "https://semantic-flow.github.io/ontology/semantic-flow-ontology/"
  },
  "@graph": [
    {
      "@id": "/",
      "@type": "owl:Ontology",
      "dcterms:title": "Semantic Flow knop configuration Ontology",
      "dcterms:description": "Configuration properties for Semantic Flow mesh entities. Defines configurable properties that apply directly to mesh knops (operational config) and through inheritable config. Used by configuration files and sflo-host ontology for setting defaults.",
      "dcterms:creator": "Semantic Flow Project",
      "owl:versionInfo": "0.1.0",
      "vann:preferredNamespacePrefix": "conf",
      "vann:alternateNamespacePrefix": [
        "sflo-conf"
      ]
    },
    {
      "@id": "ConfigurationClass/",
      "@type": "rdfs:Class",
      "rdfs:label": "Configuration Class",
      "rdfs:comment": "Abstract parent class for classes that structure configuration information."
    },
    {
      "@id": "AbstractKnopConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Abstract knop configuration",
      "rdfs:comment": "Abstract base class for knop configuration types. Defines the common structure for both operational and inheritable knop configurations.",
      "rdfs:subClassOf": {
        "@id": "ConfigurationClass/"
      }
    },
    {
      "@id": "LocalKnopConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Local knop configuration",
      "rdfs:comment": "The persisted configuration for a specific knop, stored in the _cfg-local flow. Contains explicit settings for this knop that override inherited defaults. Combined with inherited config to produce the runtime OperationalKnopConfig.",
      "rdfs:subClassOf": {
        "@id": "AbstractKnopConfig/"
      }
    },
    {
      "@id": "OperationalKnopConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Operational knop configuration",
      "rdfs:comment": "The runtime-resolved configuration for a knop. Computed by applications by merging LocalKnopConfig with inherited config from parent knops, application defaults, and platform defaults. NOT persisted to the meshâ€”exists only in application memory.",
      "rdfs:subClassOf": {
        "@id": "AbstractKnopConfig/"
      }
    },
    {
      "@id": "InheritableKnopConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Inheritable knop configuration",
      "rdfs:comment": "Configuration that can be passed down to child knops. Used by knops, services, and platform to provide default configuration for contained knops.",
      "rdfs:subClassOf": {
        "@id": "AbstractKnopConfig/"
      }
    },
    {
      "@id": "PlatformKnopConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Platform Configuration",
      "rdfs:comment": "Platform-wide default configuration including inheritable knop configuration defaults. Provides base defaults for all applications and knops in the Semantic Flow platform.",
      "rdfs:subClassOf": {
        "@id": "AbstractKnopConfig/"
      }
    },
    {
      "@id": "ApplicationKnopConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Application Configuration",
      "rdfs:comment": "Application/service-level configuration that can override platform defaults and provide inheritable configuration for knops within that application instance.",
      "rdfs:subClassOf": {
        "@id": "AbstractKnopConfig/"
      }
    },
    {
      "@id": "TemplateMappingSet/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": {
        "@id": "ConfigurationClass/"
      },
      "rdfs:label": "Template Mappings",
      "rdfs:comment": "Collection of template mappings."
    },
    {
      "@id": "TemplateMapping/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": {
        "@id": "ConfigurationClass/"
      },
      "rdfs:label": "Template Mapping",
      "rdfs:comment": "Template configuration mapping for resource page generation. A template mapping applies only if all specified target conditions (via mappingTargetClassRegex and mappingTargetSlugRegex) are satisfied. If a mapping specifies no class or slug conditions, it is applicable to all knops. Since mappings may come from multiple sources and may be multiple even from a single source, mappingPriority is used to resolve conflicts when multiple mappings apply to the same knop."
    },
    {
      "@id": "Template/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": {
        "@id": "ConfigurationClass/"
      },
      "rdfs:label": "Template",
      "rdfs:comment": "Abstract class representing a resource page template."
    },
    {
      "@id": "InnerTemplate/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": {
        "@id": "Template/"
      },
      "rdfs:label": "Inner template",
      "rdfs:comment": "An inner template defines the main content of a resource page."
    },
    {
      "@id": "OuterTemplate/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": {
        "@id": "Template/"
      },
      "rdfs:label": "Outer template",
      "rdfs:comment": "An outer template defines the overall structure and layout of a resource page."
    },
    {
      "@id": "hasLocalKnopConfig/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has local knop config",
      "rdfs:comment": "Links a knop to its persisted local configuration stored in the _cfg-local flow.",
      "schema:domainIncludes": {
        "@id": "sflo:Handle/"
      },
      "schema:rangeIncludes": {
        "@id": "LocalKnopConfig/"
      }
    },
    {
      "@id": "hasInheritableKnopConfig/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has inheritable knop config",
      "rdfs:comment": "Links a knop to a configuration that can be inherited by child knops.",
      "schema:domainIncludes": [
        {
          "@id": "sflo:Handle/"
        }
      ],
      "schema:rangeIncludes": {
        "@id": "InheritableKnopConfig/"
      }
    },
    {
      "@id": "hasOperationalKnopConfig/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has operational knop config",
      "rdfs:comment": "Links a knop to its runtime-resolved operational configuration.",
      "schema:domainIncludes": [
        {
          "@id": "sflo:Handle/"
        }
      ],
      "schema:rangeIncludes": {
        "@id": "OperationalKnopConfig/"
      }
    },
    {
      "@id": "payloadFlowVersioningEnabled/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "payload flow versioning enabled",
      "rdfs:comment": "Whether versioning is enabled for associated payload flows.",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "referenceFlowVersioningEnabled/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "reference flow versioning enabled",
      "rdfs:comment": "Whether versioning is enabled for associated reference flows.",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "metaFlowVersioningEnabled/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "meta flow versioning enabled",
      "rdfs:comment": "Whether versioning is enabled for associated meta flows.",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "localConfigFlowVersioningEnabled/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "local config flow versioning enabled",
      "rdfs:comment": "Whether versioning is enabled for associated local config flows.",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "inheritableConfigFlowVersioningEnabled/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "inheritable config flow versioning enabled",
      "rdfs:comment": "Whether versioning is enabled for associated inheritable config flows.",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "knopConfigInheritanceEnabled/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "knop config inheritance enabled",
      "rdfs:comment": "Whether this knop should accept inherited configuration from parent knops. Set in LocalKnopConfig to disable inheritance resolution for this Knop. Set in InheritaleKnopConfig to disable inheritance for child knops. Set in ApplicationKnopConfig to disable inheritance (if not otherwise specified) for knops within that application.",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "hasTemplateMappingSet/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has template mappings",
      "rdfs:comment": "Collection of template mappings for resource page generation",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "TemplateMappingSet/"
      }
    },
    {
      "@id": "hasTemplateMapping/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has template mapping",
      "rdfs:comment": "Individual template mapping within a set of template mappings. ",
      "schema:domainIncludes": {
        "@id": "TemplateMappingSet/"
      },
      "schema:rangeIncludes": {
        "@id": "TemplateMapping/"
      }
    },
    {
      "@id": "innerTemplate/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "inner template",
      "rdfs:comment": "Inner template for resource pages",
      "schema:domainIncludes": {
        "@id": "TemplateMapping/"
      },
      "schema:rangeIncludes": {
        "@id": "InnerTemplate"
      }
    },
    {
      "@id": "outerTemplate/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "outer template url",
      "rdfs:comment": "Outer template for resource pages",
      "schema:domainIncludes": {
        "@id": "TemplateMapping/"
      },
      "schema:rangeIncludes": {
        "@id": "OuterTemplate"
      }
    },
    {
      "@id": "stylesheet/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "stylesheet path",
      "rdfs:comment": "Path to CSS stylesheet for generated pages",
      "schema:domainIncludes": {
        "@id": "TemplateMapping/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:anyURI"
      }
    },
    {
      "@id": "mappingPriority/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "mapping priority",
      "rdfs:comment": "Integer priority for resolving conflicts between template mappings. Higher values SHOULD take precedence when multiple mappings apply to the same knop.",
      "schema:domainIncludes": {
        "@id": "TemplateMapping/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:integer"
      }
    },
    {
      "@id": "mappingTargetClassRegex/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "mapping target class regex",
      "rdfs:comment": "Regular expression for attaching mappings to target knops based on their class identifier.",
      "schema:domainIncludes": {
        "@id": "TemplateMapping/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:string"
      }
    },
    {
      "@id": "mappingTargetSlugRegex/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "mapping target slug regex",
      "rdfs:comment": "Regular expression for attaching mappings to target knops based on their 'local name' slug",
      "schema:domainIncludes": {
        "@id": "TemplateMapping/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:string"
      }
    },
    {
      "@id": "generateUnifiedDataset/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "generate unified dataset",
      "rdfs:comment": "Whether to generate unified dataset components",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "generateAggregatedDataset/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "generate aggregated dataset",
      "rdfs:comment": "Whether to generate aggregated dataset components",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "generateResourcePages/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "generate resource pages",
      "rdfs:comment": "Whether to (re-)generate HTML resource pages during weave",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "flowToken",
      "@type": "owl:AnnotationProperty",
      "rdfs:label": "Flow token",
      "rdfs:comment": "Use in flow folder naming and as a suffix for flow distributions.",
      "schema:domainIncludes": {
        "@id": "Flow/"
      },
      "schema:rangeIncludes": {
        "@id": "string"
      }
    },
    {
      "@id": "isSameKnopAs/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "is same knop as",
      "rdfs:comment": "Indicates that two knops are considered the same, semantically. Useful for moving knops to different paths or different hosts",
      "schema:domainIncludes": {
        "@id": "KnopHandle/"
      },
      "schema:rangeIncludes": {
        "@id": "KnopHandle/"
      }
    },
    {
      "@id": "DistributionFormatShape/",
      "@type": "sh:NodeShape",
      "sh:targetObjectsOf": {
        "@id": "formats:media_type"
      },
      "sh:property": {
        "@type": "sh:PropertyShape",
        "sh:path": {
          "@id": "rdf:value"
        },
        "sh:in": {
          "@list": [
            "application/trig",
            "application/ld+json",
            "text/turtle",
            "application/n-triples",
            "application/n-quads",
            "application/rdf+xml"
          ]
        },
        "sh:message": "Distribution format must be a valid RDF media type"
      }
    },
    {
      "@id": "TemplatePathShape/",
      "@type": "sh:NodeShape",
      "sh:targetObjectsOf": [
        {
          "@id": "innerTemplateUrl/"
        },
        {
          "@id": "outerTemplateUrl/"
        }
      ],
      "sh:property": {
        "@type": "sh:PropertyShape",
        "sh:path": {
          "@id": "rdf:value"
        },
        "sh:pattern": "^[^/].*\\.(vto)$",
        "sh:message": "Template URL should be a URL ending in .vto",
        "sh:severity": "sh:Warning"
      }
    }
  }
]
}
