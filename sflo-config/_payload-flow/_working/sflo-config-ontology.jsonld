{
  "@context": {
    "@base": "https://semantic-flow.github.io/ontology/sflo-config/",
    "owl": "http://www.w3.org/2002/07/owl#",
    "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
    "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
    "xsd": "http://www.w3.org/2001/XMLSchema#",
    "sh": "http://www.w3.org/ns/shacl#",
    "dcterms": "http://purl.org/dc/terms/",
    "schema": "https://schema.org/",
    "formats": "http://www.w3.org/ns/formats/",
    "sflo-meta": "https://semantic-flow.github.io/ontology/sflo-meta/"
  },
  "@graph": [
    {
      "@id": "/",
      "@type": "owl:Ontology",
      "dcterms:title": "Semantic Flow knop configuration Ontology",
      "dcterms:description": "Configuration properties for Semantic Flow mesh entities. Defines configurable properties that apply directly to mesh knops (operational config) and through inheritable config. Used by configuration files and sflo-host ontology for setting defaults.",
      "dcterms:creator": "Semantic Flow Project",
      "owl:versionInfo": "0.1.0",
      "vann:preferredNamespacePrefix": "sflo-conf",
      "vann:alternateNamespacePrefix": [
        "sflo-config"
      ]
    },
    {
      "@id": "ConfigurationClass/",
      "@type": "rdfs:Class",
      "rdfs:label": "Configuration Class",
      "rdfs:comment": "Classes that structure configuration information within config distributions."
    },
    {
      "@id": "AbstractKnopConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Abstract knop configuration",
      "rdfs:comment": "Abstract base class for knop configuration types. Defines the common structure for both operational and inheritable knop configurations.",
      "rdfs:subClassOf": {
        "@id": "ConfigurationClass/"
      }
    },
    {
      "@id": "OperationalKnopConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Operational knop configuration",
      "rdfs:comment": "The actual operational configuration for a specific knop. Controls how this knop behaves (versioning, distribution formats, etc.). Does not participate in inheritance chain.",
      "rdfs:subClassOf": {
        "@id": "AbstractKnopConfig/"
      }
    },
    {
      "@id": "InheritableKnopConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Inheritable knop configuration",
      "rdfs:comment": "Configuration that can be passed down to child knops. Used by knops, services, and platform to provide default configuration for contained knops.",
      "rdfs:subClassOf": {
        "@id": "AbstractKnopConfig/"
      }
    },
    {
      "@id": "PlatformConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Platform Configuration",
      "rdfs:comment": "Platform-wide default configuration including inheritable knop configuration defaults. Provides base defaults for all applications and knops in the Semantic Flow platform.",
      "rdfs:subClassOf": {
        "@id": "ConfigurationClass/"
      }
    },
    {
      "@id": "ApplicationConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Application Configuration",
      "rdfs:comment": "Application/service-level configuration that can override platform defaults and provide inheritable configuration for knops within that application instance.",
      "rdfs:subClassOf": {
        "@id": "ConfigurationClass/"
      }
    },
    {
      "@id": "TemplateMappings/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": {
        "@id": "ConfigurationClass/"
      },
      "rdfs:label": "Template Mappings",
      "rdfs:comment": "Collection of template mappings."
    },
    {
      "@id": "TemplateMapping/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": {
        "@id": "ConfigurationClass/"
      },
      "rdfs:label": "Template Mapping",
      "rdfs:comment": "Template configuration mapping for resource page generation within knop configurations."
    },
    {
      "@id": "hasOperationalKnopConfig/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has operational knop config",
      "rdfs:comment": "Links a knop to its operational configuration that controls how the knop behaves.",
      "schema:domainIncludes": {
        "@id": "sflo:Handle/"
      },
      "schema:rangeIncludes": {
        "@id": "OperationalKnopConfig/"
      }
    },
    {
      "@id": "hasInheritableKnopConfig/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has inheritable knop config",
      "rdfs:comment": "Links a knop, service, or platform to configuration that can be inherited by child knops.",
      "schema:domainIncludes": [
        {
          "@id": "sflo:Handle/"
        },
        {
          "@id": "ApplicationConfig/"
        },
        {
          "@id": "PlatformConfig/"
        }
      ],
      "schema:rangeIncludes": {
        "@id": "InheritableKnopConfig/"
      }
    },
    {
      "@id": "versioningEnabled/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "versioning enabled",
      "rdfs:comment": "Whether versioning is enabled for this flow.",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "knopConfigInheritanceEnabled/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "knop config inheritance enabled",
      "rdfs:comment": "Whether this knop inherits configuration from parent knops",
      "schema:domainIncludes": {
        "@id": "OperationalKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "inheritableConfigPropagationEnabled/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "inheritable config propagation enabled",
      "rdfs:comment": "Whether this knop's InheritableKnopConfig should be available to child knops. Default is true.",
      "schema:domainIncludes": {
        "@id": "sflo:Handle/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "hasTemplateMappings/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has template mappings",
      "rdfs:comment": "Collection of template mappings for resource page generation",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "TemplateMappings/"
      }
    },
    {
      "@id": "hasTemplateMapping/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has template mapping",
      "rdfs:comment": "Individual template mapping within a collection",
      "schema:domainIncludes": {
        "@id": "TemplateMappings/"
      },
      "schema:rangeIncludes": {
        "@id": "TemplateMapping/"
      }
    },
    {
      "@id": "hasResourcePageTemplate/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "has resource page template",
      "rdfs:comment": "Template file path for resource pages",
      "schema:domainIncludes": {
        "@id": "TemplateMapping/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:string"
      }
    },
    {
      "@id": "generateUnifiedDataset/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "generate unified dataset",
      "rdfs:comment": "Whether to generate unified dataset components",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "generateAggregatedDataset/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "generate aggregated dataset",
      "rdfs:comment": "Whether to generate aggregated dataset components",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "generateResourcePages/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "generate resource pages",
      "rdfs:comment": "Whether to (re-)generate HTML resource pages during weave",
      "schema:domainIncludes": {
        "@id": "sflo:FolderResource/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "stylesheetPath/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "stylesheet path",
      "rdfs:comment": "Path to CSS stylesheet for generated pages",
      "schema:domainIncludes": {
        "@id": "AbstractKnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:string"
      }
    },
    {
      "@id": "containsKnop/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "contains knop",
      "rdfs:comment": "Indicates that this knop contains another knop.",
      "schema:domainIncludes": {
        "@id": "sflo:Handle/"
      },
      "schema:rangeIncludes": {
        "@id": "sflo:Handle/"
      }
    },
    {
      "@id": "defaultProvenanceTemplate/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "default provenance template",
      "rdfs:comment": "Default sflo-meta:ProvenanceTemplate to use for meta-flow and weave provenance when no more specific provenance is supplied.",
      "schema:domainIncludes": [
        {
          "@id": "PlatformConfig/"
        },
        {
          "@id": "ApplicationConfig/"
        },
        {
          "@id": "InheritableKnopConfig/"
        },
        {
          "@id": "OperationalKnopConfig/"
        }
      ],
      "schema:rangeIncludes": {
        "@id": "sflo-meta:ProvenanceTemplate/"
      }
    },
    {
      "@id": "DistributionFormatShape/",
      "@type": "sh:KnopShape",
      "sh:targetObjectsOf": {
        "@id": "formats:media_type"
      },
      "sh:property": {
        "@type": "sh:PropertyShape",
        "sh:path": {
          "@id": "rdf:value"
        },
        "sh:in": {
          "@list": [
            "application/trig",
            "application/ld+json",
            "text/turtle",
            "application/n-triples",
            "application/n-quads",
            "application/rdf+xml"
          ]
        },
        "sh:message": "Distribution format must be a valid RDF media type"
      }
    },
    {
      "@id": "TemplatePathShape/",
      "@type": "sh:KnopShape",
      "sh:targetObjectsOf": {
        "@id": "hasResourcePageTemplate/"
      },
      "sh:property": {
        "@type": "sh:PropertyShape",
        "sh:path": {
          "@id": "rdf:value"
        },
        "sh:pattern": "^[^/].*\\.(html|htm|hbs|mustache)$",
        "sh:message": "Template path must be a relative path ending in .html, .htm, .hbs, or .mustache"
      }
    },
    {
      "@id": "KnopShape/",
      "@type": "sh:KnopShape",
      "sh:targetClass": {
        "@id": "sflo:Handle/"
      },
      "sh:property": [
        {
          "@type": "sh:PropertyShape",
          "sh:path": {
            "@id": "formats:media_type"
          },
          "sh:minCount": 1,
          "sh:message": "At least one distribution format must be specified"
        },
        {
          "@type": "sh:PropertyShape",
          "sh:path": {
            "@id": "stylesheetPath/"
          },
          "sh:pattern": "^[^/].*\\.(css|scss|sass)$",
          "sh:message": "Stylesheet path must be a relative path ending in .css, .scss, or .sass"
        }
      ]
    },
    {
      "@id": "defaultPlatformConfig",
      "@type": "PlatformConfig/",
      "rdfs:label": "Default Platform Configuration",
      "rdfs:comment": "The default configuration for the Semantic Flow platform. Provides sensible defaults for all applications and knops.",
      "hasInheritableKnopConfig": {
        "@id": "defaultInheritableKnopConfig",
        "@type": "InheritableKnopConfig/",
        "rdfs:label": "Default Inheritable knop configuration",
        "rdfs:comment": "Default configuration that is inherited by all knops unless overridden.",
        "versioningEnabled": true,
        "formats:media_type": [
          "application/trig",
          "application/ld+json"
        ],
        "generateUnifiedDataset": false,
        "generateAggregatedDataset": false,
        "knopConfigInheritanceEnabled": true
      }
    }
  ]
}
/*

## TODO

sflo:metaFlowVersioningStateDesired      a owl:ObjectProperty ; schema:domainIncludes sflo:Knop ; schema:rangeIncludes sflo:VersioningState .
sflo:refFlowVersioningStateDesired       a owl:ObjectProperty ; schema:domainIncludes sflo:Knop ; schema:rangeIncludes sflo:VersioningState .
sflo:dataFlowVersioningStateDesired      a owl:ObjectProperty ; schema:domainIncludes sflo:Knop ; schema:rangeIncludes sflo:VersioningState .
sflo:configFlowVersioningStateDesired    a owl:ObjectProperty ; schema:domainIncludes sflo:Knop ; schema:rangeIncludes sflo:VersioningState .
sflo:payloadFlowVersioningStateDesired   a owl:ObjectProperty ; schema:domainIncludes sflo:Knop ; schema:rangeIncludes sflo:VersioningState .
*/
