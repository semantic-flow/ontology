{
  "@context": {
    "@base": "https://semantic-flow.github.io/ontology/sflo-config/_payload-flow/_next/sflo-config-ontology.jsonld#",
    "owl": "http://www.w3.org/2002/07/owl#",
    "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
    "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
    "xsd": "http://www.w3.org/2001/XMLSchema#",
    "sh": "http://www.w3.org/ns/shacl#",
    "dcterms": "http://purl.org/dc/terms/",
    "schema": "https://schema.org/",
    "formats": "http://www.w3.org/ns/formats/",
    "sflo-prov": "https://semantic-flow.github.io/ontology/sflo-prov/",
    "sflo-host": "https://semantic-flow.github.io/ontology/flow-service/"
  },
  "@graph": [
    {
      "@id": "/",
      "@type": "owl:Ontology",
      "dcterms:title": "Semantic Flow Node Configuration Ontology",
      "dcterms:description": "Configuration properties for Semantic Flow mesh entities. Defines configurable properties that apply directly to mesh nodes (operational config) and through inheritable config. Used by configuration files and sflo-host ontology for setting defaults.",
      "dcterms:creator": "Semantic Flow Project",
      "owl:versionInfo": "0.1.0",
      "vann:preferredNamespacePrefix": "sflo-conf",
      "vann:alternateNamespacePrefix": ["sflo-config"]
    },
    {
      "@id": "ConfigurationClass/",
      "@type": "rdfs:Class",
      "rdfs:label": "Configuration Class",
      "rdfs:comment": "Classes that structure configuration information within config distributions."
    },
    {
      "@id": "AbstractNodeConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Abstract Node Configuration",
      "rdfs:comment": "Abstract base class for node configuration types. Defines the common structure for both operational and inheritable node configurations.",
      "rdfs:subClassOf": { "@id": "ConfigurationClass/" }
    },
    {
      "@id": "OperationalNodeConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Operational Node Configuration",
      "rdfs:comment": "The actual operational configuration for a specific node. Controls how this node behaves (versioning, distribution formats, etc.). Does not participate in inheritance chain.",
      "rdfs:subClassOf": { "@id": "AbstractNodeConfig/" }
    },
    {
      "@id": "InheritableNodeConfig/",
      "@type": "rdfs:Class",
      "rdfs:label": "Inheritable Node Configuration",
      "rdfs:comment": "Configuration that can be passed down to child nodes. Used by nodes, services, and platform to provide default configuration for contained nodes.",
      "rdfs:subClassOf": { "@id": "AbstractNodeConfig/" }
    },
    {
      "@id": "TemplateMappings/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": { "@id": "ConfigurationClass/" },
      "rdfs:label": "Template Mappings",
      "rdfs:comment": "Collection of template mappings."
    },
    {
      "@id": "TemplateMapping/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": { "@id": "ConfigurationClass/" },
      "rdfs:label": "Template Mapping",
      "rdfs:comment": "Template configuration mapping for resource page generation within node configurations."
    },
    {
      "@id": "distributionSlug/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "distribution slug",
      "rdfs:comment": "Kebab-case stem used to name distributions for this MeshNode. If absent, default is the last path segment of the node's namespace IRI.",
      "schema:domainIncludes": { "@id": "sflo:MeshNode/" },
      "schema:rangeIncludes": { "@id": "xsd:string" }
    },
    {
      "@id": "hasOperationalNodeConfig/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has operational node config",
      "rdfs:comment": "Links a node to its operational configuration that controls how the node behaves.",
      "schema:domainIncludes": { "@id": "sflo:Handle/" },
      "schema:rangeIncludes": { "@id": "OperationalNodeConfig/" }
    },
    {
      "@id": "hasInheritableNodeConfig/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has inheritable node config",
      "rdfs:comment": "Links a node, service, or platform to configuration that can be inherited by child nodes.",
      "schema:domainIncludes": [
        { "@id": "sflo:Handle/" },
        { "@id": "sflo-host:ServiceConfig/" },
        { "@id": "sflo-host:PlatformServiceConfig/" }
      ],
      "schema:rangeIncludes": { "@id": "InheritableNodeConfig/" }
    },
    {
      "@id": "versioningEnabled/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "versioning enabled",
      "rdfs:comment": "Whether versioning is enabled for this flow.",
      "schema:domainIncludes": { "@id": "AbstractNodeConfig/" },
      "schema:rangeIncludes": { "@id": "xsd:boolean" }
    },
    {
      "@id": "nodeConfigInheritanceEnabled/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "node config inheritance enabled",
      "rdfs:comment": "Whether this node inherits configuration from parent nodes",
      "schema:domainIncludes": { "@id": "OperationalNodeConfig/" },
      "schema:rangeIncludes": { "@id": "xsd:boolean" }
    },
    {
      "@id": "inheritableConfigPropagationEnabled/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "inheritable config propagation enabled",
      "rdfs:comment": "Whether this node's InheritableNodeConfig should be available to child nodes. Default is true.",
      "schema:domainIncludes": { "@id": "sflo:Handle/" },
      "schema:rangeIncludes": { "@id": "xsd:boolean" }
    },
    {
      "@id": "hasTemplateMappings/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has template mappings",
      "rdfs:comment": "Collection of template mappings for resource page generation",
      "schema:domainIncludes": { "@id": "AbstractNodeConfig/" },
      "schema:rangeIncludes": { "@id": "TemplateMappings/" }
    },
    {
      "@id": "hasTemplateMapping/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has template mapping",
      "rdfs:comment": "Individual template mapping within a collection",
      "schema:domainIncludes": { "@id": "TemplateMappings/" },
      "schema:rangeIncludes": { "@id": "TemplateMapping/" }
    },
    {
      "@id": "hasResourcePageTemplate/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "has resource page template",
      "rdfs:comment": "Template file path for resource pages",
      "schema:domainIncludes": { "@id": "TemplateMapping/" },
      "schema:rangeIncludes": { "@id": "xsd:string" }
    },
    {
      "@id": "generateUnifiedDataset/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "generate unified dataset",
      "rdfs:comment": "Whether to generate unified dataset components",
      "schema:domainIncludes": { "@id": "AbstractNodeConfig/" },
      "schema:rangeIncludes": { "@id": "xsd:boolean" }
    },
    {
      "@id": "generateAggregatedDataset/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "generate aggregated dataset",
      "rdfs:comment": "Whether to generate aggregated dataset components",
      "schema:domainIncludes": { "@id": "AbstractNodeConfig/" },
      "schema:rangeIncludes": { "@id": "xsd:boolean" }
    },
    {
      "@id": "generateResourcePages/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "generate resource pages",
      "rdfs:comment": "Whether to (re-)generate HTML resource pages during weave",
      "schema:domainIncludes": { "@id": "sflo:FolderResource/" },
      "schema:rangeIncludes": { "@id": "xsd:boolean" }
    },
    {
      "@id": "stylesheetPath/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "stylesheet path",
      "rdfs:comment": "Path to CSS stylesheet for generated pages",
      "schema:domainIncludes": { "@id": "AbstractNodeConfig/" },
      "schema:rangeIncludes": { "@id": "xsd:string" }
    },
    {
      "@id": "containsNode/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "contains node",
      "rdfs:comment": "Indicates that this node contains another node.",
      "schema:domainIncludes": { "@id": "sflo:Handle/" },
      "schema:rangeIncludes": { "@id": "sflo:Handle/" }
    },
    {
      "@id": "DistributionFormatShape/",
      "@type": "sh:NodeShape",
      "sh:targetObjectsOf": { "@id": "formats:media_type" },
      "sh:property": {
        "@type": "sh:PropertyShape",
        "sh:path": { "@id": "rdf:value" },
        "sh:in": {
          "@list": [
            "application/trig",
            "application/ld+json",
            "text/turtle",
            "application/n-triples",
            "application/n-quads",
            "application/rdf+xml"
          ]
        },
        "sh:message": "Distribution format must be a valid RDF media type"
      }
    },
    {
      "@id": "TemplatePathShape/",
      "@type": "sh:NodeShape",
      "sh:targetObjectsOf": { "@id": "hasResourcePageTemplate/" },
      "sh:property": {
        "@type": "sh:PropertyShape",
        "sh:path": { "@id": "rdf:value" },
        "sh:pattern": "^[^/].*\\.(html|htm|hbs|mustache)$",
        "sh:message": "Template path must be a relative path ending in .html, .htm, .hbs, or .mustache"
      }
    },
    {
      "@id": "NodeShape/",
      "@type": "sh:NodeShape",
      "sh:targetClass": { "@id": "sflo:Handle/" },
      "sh:property": [
        {
          "@type": "sh:PropertyShape",
          "sh:path": { "@id": "formats:media_type" },
          "sh:minCount": 1,
          "sh:message": "At least one distribution format must be specified"
        },
        {
          "@type": "sh:PropertyShape",
          "sh:path": { "@id": "stylesheetPath/" },
          "sh:pattern": "^[^/].*\\.(css|scss|sass)$",
          "sh:message": "Stylesheet path must be a relative path ending in .css, .scss, or .sass"
        }
      ]
    }
  ]
}

/*

## TODO

sflo:metaFlowVersioningStateDesired      a owl:ObjectProperty ; schema:domainIncludes sflo:Node ; schema:rangeIncludes sflo:VersioningState .
sflo:refFlowVersioningStateDesired       a owl:ObjectProperty ; schema:domainIncludes sflo:Node ; schema:rangeIncludes sflo:VersioningState .
sflo:dataFlowVersioningStateDesired      a owl:ObjectProperty ; schema:domainIncludes sflo:Node ; schema:rangeIncludes sflo:VersioningState .
sflo:configFlowVersioningStateDesired    a owl:ObjectProperty ; schema:domainIncludes sflo:Node ; schema:rangeIncludes sflo:VersioningState .
sflo:payloadFlowVersioningStateDesired   a owl:ObjectProperty ; schema:domainIncludes sflo:Node ; schema:rangeIncludes sflo:VersioningState .
*/
