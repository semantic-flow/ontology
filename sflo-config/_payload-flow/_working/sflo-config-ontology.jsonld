{
  "@context": {
    "@base": "https://semantic-flow.github.io/ontology/sflo-config/",
    "owl": "http://www.w3.org/2002/07/owl#",
    "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
    "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
    "xsd": "http://www.w3.org/2001/XMLSchema#",
    "sh": "http://www.w3.org/ns/shacl#",
    "dcat": "http://www.w3.org/ns/dcat#",
    "dcterms": "http://purl.org/dc/terms/",
    "schema": "https://schema.org/",
    "formats": "http://www.w3.org/ns/formats/",
    "vann": "http://purl.org/vocab/vann/",
    "sflo": "https://semantic-flow.github.io/ontology/semantic-flow-ontology/"
  },
  "@graph": [
    {
      "@id": "",
      "@type": "owl:Ontology",
      "dcterms:title": "Semantic Flow knop configuration Ontology",
      "dcterms:description": "Configuration properties for Semantic Flow mesh entities. Defines configurable properties that apply directly to mesh knops (operational config) and through inheritable config. Used by configuration files and sflo-host ontology for setting defaults.",
      "dcterms:creator": "Semantic Flow Project",
      "owl:versionInfo": "0.1.0",
      "vann:preferredNamespacePrefix": "conf",
      "vann:alternateNamespacePrefix": [
        "sflo-conf"
      ]
    },
    {
      "@id": "ConfigurationClass/",
      "@type": "rdfs:Class",
      "rdfs:label": "Configuration Class",
      "rdfs:comment": "Abstract parent class for classes that structure configuration information."
    },
    {
      "@id": "KnopNodeConfig/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": [
        {
          "@id": "sflo:PlatformElement/"
        },
        {
          "@id": "dcat:Dataset"
        }
      ],
      "rdfs:label": "knop config dataset",
      "rdfs:comment": "Dataset containing KnopNode configuration data."
    },
    {
      "@id": "hasLocalConfig/",
      "@type": "owl:ObjectProperty",
      "rdfs:domain": {
        "@id": "KnopNode/"
      },
      "rdfs:range": {
        "@id": "KnopNodeConfig/"
      },
      "rdfs:label": "local config",
      "rdfs:comment": "Links KnopNodes to a local config."
    },
    {
      "@id": "hasInheritableConfig/",
      "@type": "owl:ObjectProperty",
      "rdfs:domain": {
        "@id": "KnopNode/"
      },
      "rdfs:range": {
        "@id": "KnopNodeConfig/"
      },
      "rdfs:label": "inheritable config",
      "rdfs:comment": "Links KnopNodes to an inheritable config."
    },
    {
      "@id": "hasEffectiveConfig/",
      "@type": "owl:ObjectProperty",
      "rdfs:domain": {
        "@id": "KnopNode/"
      },
      "rdfs:range": {
        "@id": "KnopNodeConfig/"
      },
      "rdfs:label": "effective config",
      "rdfs:comment": "Links KnopNodes to their effective config. Shouldn't be persisted, only computed at runtime."
    },
    {
      "@id": "TemplateMappingSet/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": {
        "@id": "ConfigurationClass/"
      },
      "rdfs:label": "Template Mappings",
      "rdfs:comment": "Collection of template mappings."
    },
    {
      "@id": "TemplateMapping/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": {
        "@id": "ConfigurationClass/"
      },
      "rdfs:label": "Template Mapping",
      "rdfs:comment": "Template configuration mapping for resource page generation. A template mapping applies only if all specified target conditions (via mappingTargetClassRegex and mappingTargetSlugRegex) are satisfied. If a mapping specifies no class or slug conditions, it is applicable to all knops. Since mappings may come from multiple sources and may be multiple even from a single source, mappingPriority is used to resolve conflicts when multiple mappings apply to the same knop."
    },
    {
      "@id": "Template/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": {
        "@id": "ConfigurationClass/"
      },
      "rdfs:label": "Template",
      "rdfs:comment": "Abstract class representing a resource page template."
    },
    {
      "@id": "InnerTemplate/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": {
        "@id": "Template/"
      },
      "rdfs:label": "Inner template",
      "rdfs:comment": "An inner template defines the main content of a resource page."
    },
    {
      "@id": "OuterTemplate/",
      "@type": "rdfs:Class",
      "rdfs:subClassOf": {
        "@id": "Template/"
      },
      "rdfs:label": "Outer template",
      "rdfs:comment": "An outer template defines the overall structure and layout of a resource page."
    },
    {
      "@id": "knopConfigInheritanceEnabled/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "knop config inheritance enabled",
      "rdfs:comment": "Whether this knop should accept inherited configuration from parent knops. Set in LocalKnopConfig to disable inheritance resolution for this Knop. Set in InheritaleKnopConfig to disable inheritance for child knops. Set in ApplicationKnopConfig to disable inheritance (if not otherwise specified) for knops within that application.",
      "schema:domainIncludes": {
        "@id": "KnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "hasTemplateMappingSet/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has template mappings",
      "rdfs:comment": "Collection of template mappings for resource page generation",
      "schema:domainIncludes": {
        "@id": "KnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "TemplateMappingSet/"
      }
    },
    {
      "@id": "hasTemplateMapping/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has template mapping",
      "rdfs:comment": "Individual template mapping within a set of template mappings. ",
      "schema:domainIncludes": {
        "@id": "TemplateMappingSet/"
      },
      "schema:rangeIncludes": {
        "@id": "TemplateMapping/"
      }
    },
    {
      "@id": "innerTemplate/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "inner template",
      "rdfs:comment": "Inner template for resource pages",
      "schema:domainIncludes": {
        "@id": "TemplateMapping/"
      },
      "schema:rangeIncludes": {
        "@id": "InnerTemplate"
      }
    },
    {
      "@id": "outerTemplate/",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "outer template url",
      "rdfs:comment": "Outer template for resource pages",
      "schema:domainIncludes": {
        "@id": "TemplateMapping/"
      },
      "schema:rangeIncludes": {
        "@id": "OuterTemplate"
      }
    },
    {
      "@id": "stylesheet/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "stylesheet path",
      "rdfs:comment": "Path to CSS stylesheet for generated pages",
      "schema:domainIncludes": {
        "@id": "TemplateMapping/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:anyURI"
      }
    },
    {
      "@id": "mappingPriority/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "mapping priority",
      "rdfs:comment": "Integer priority for resolving conflicts between template mappings. Higher values SHOULD take precedence when multiple mappings apply to the same knop.",
      "schema:domainIncludes": {
        "@id": "TemplateMapping/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:integer"
      }
    },
    {
      "@id": "mappingTargetClassRegex/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "mapping target class regex",
      "rdfs:comment": "Regular expression for attaching mappings to target knops based on their class identifier.",
      "schema:domainIncludes": {
        "@id": "TemplateMapping/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:string"
      }
    },
    {
      "@id": "mappingTargetSlugRegex/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "mapping target slug regex",
      "rdfs:comment": "Regular expression for attaching mappings to target knops based on their 'local name' slug",
      "schema:domainIncludes": {
        "@id": "TemplateMapping/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:string"
      }
    },
    {
      "@id": "generateResourcePages/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "generate resource pages",
      "rdfs:comment": "Whether to (re-)generate HTML resource pages during weave",
      "schema:domainIncludes": {
        "@id": "KnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:boolean"
      }
    },
    {
      "@id": "folderToken",
      "@type": "owl:AnnotationProperty",
      "rdfs:label": "Folder token",
      "rdfs:comment": "Use in flow folder naming and as a suffix for flow distributions.",
      "schema:domainIncludes": {
        "@id": "NamingResource/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:string"
      }
    },
    {
      "@id": "workingToken",
      "@type": "owl:AnnotationProperty",
      "rdfs:label": "Flow token",
      "rdfs:comment": "Use in flow folder naming and as a suffix for flow distributions.",
      "schema:domainIncludes": [
        {
          "@id": "KnopConfig/"
        }
      ],
      "schema:rangeIncludes": {
        "@id": "xsd:string"
      }
    },
    {
      "@id": "retainNumSlices/",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "retain number of slices",
      "rdfs:comment": "Number of previous FlowSlices to retain when weaving. Not defined means retain all.",
      "schema:domainIncludes": {
        "@id": "KnopConfig/"
      },
      "schema:rangeIncludes": {
        "@id": "xsd:integer"
      }
    },
    {
      "@id": "DistributionFormatShape/",
      "@type": "sh:NodeShape",
      "sh:targetObjectsOf": {
        "@id": "formats:media_type"
      },
      "sh:property": {
        "@type": "sh:PropertyShape",
        "sh:path": {
          "@id": "rdf:value"
        },
        "sh:in": {
          "@list": [
            "application/trig",
            "application/ld+json",
            "text/turtle",
            "application/n-triples",
            "application/n-quads",
            "application/rdf+xml"
          ]
        },
        "sh:message": "Distribution format must be a valid RDF media type"
      }
    },
    {
      "@id": "TemplatePathShape/",
      "@type": "sh:NodeShape",
      "sh:targetObjectsOf": [
        {
          "@id": "innerTemplateUrl/"
        },
        {
          "@id": "outerTemplateUrl/"
        }
      ],
      "sh:property": {
        "@type": "sh:PropertyShape",
        "sh:path": {
          "@id": "rdf:value"
        },
        "sh:pattern": "^[^/].*\\.(vto)$",
        "sh:message": "Template URL should be a URL ending in .vto",
        "sh:severity": "sh:Warning"
      }
    }
  ]
}
