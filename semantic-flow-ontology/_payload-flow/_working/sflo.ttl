@base <https://semantic-flow.github.io/semantic-flow-ontology/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix schema: <https://schema.org/> .
@prefix vann: <http://purl.org/vocab/vann/> .

<> a owl:Ontology ;
  dcterms:title "Semantic Flow Ontology" ;
  dcterms:description "The Semantic Flow ontology defines the classes and properties used for defining and describing semantic meshes and their resources." ;
  dcterms:creator <https://djradon.github.io/ns/djradon/> ;
  owl:versionInfo "0.0.1" ;
  owl:versionIRI <https://semantic-flow.github.io/semantic-flow-ontology/_knops/_payload/_working/sflo.ttl/sflo.ttl> ;
  vann:preferredNamespacePrefix "sflo" ;
  vann:preferredNamespaceUri <https://semantic-flow.github.io/semantic-flow-ontology/> .


# Core Semantic Mesh-scoped resources

<MeshResource/> a rdfs:Class ;
  rdfs:label "Mesh resource" ;
  rdfs:comment "A resource governed by Semantic Flow mesh conventions and addressable within a mesh's namespace. Includes meshes themselves" .

<ArtifactHost/> a rdfs:Class ;
  rdfs:subClassOf <MeshResource/> ;
  rdfs:label "Artifact host" ;
  rdfs:comment "A mesh-governed resource that can contain artifacts and associated structural resources. Nomen are ArtifactHosts that can also contain other Nomen. " .

<containsMeshResource/> a owl:ObjectProperty ;
  rdfs:domain <ArtifactHost/> ;
  rdfs:range <MeshResource/> ;
  rdfs:label "contains mesh resource" ;
  rdfs:comment "Structural containment relation for mesh-governed resources, asserted from an artifact-hosting resource (Mesh, Knop, or Nomen)." .

<Mesh/> a rdfs:Class ;
  rdfs:subClassOf <ArtifactHost/> ;
  rdfs:label "Mesh" ;
  rdfs:comment "A servable filesystem region (conventionally surfaced via a reserved _mesh/ handle) that contains mesh-governed resources and, optionally, other supporting resources." .

<meshBase/> a owl:DatatypeProperty ;
  rdfs:domain <Mesh/> ;
  rdfs:range xsd:anyURI ;
  rdfs:label "Mesh Base" ;
  rdfs:comment "A mesh's canonical BASE (publish location). Represented as a URI literal to avoid asserting anything about the denoted thing." .

<MeshComponent/> a rdfs:Class ;
  rdfs:subClassOf <MeshResource/> ;
  rdfs:label "Mesh component" ;
  rdfs:comment "A reserved, mesh-scoped structural resource (e.g., mesh-level metadata, mesh inventory)." .  

<containsMeshComponent/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <containsMeshResource/> ;
  rdfs:domain <Mesh/> ;
  rdfs:range <MeshComponent/> ;
  rdfs:label "contains mesh component" ;
  rdfs:comment "Associates a Mesh with one of its directly contained MeshComponents." .

<containsKnopComponent/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <containsMeshResource/> ;
  rdfs:domain <Knop/> ;
  rdfs:range <KnopComponent/> ;
  rdfs:label "contains knop component" ;
  rdfs:comment "Associates a Knop with one of its directly contained KnopComponents." .

<containsNomenComponent/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <containsMeshResource/> ;
  rdfs:domain <Nomen/> ;
  rdfs:range <NomenComponent/> ;
  rdfs:label "contains nomen component" ;
  rdfs:comment "Associates a Nomen with one of its directly contained NomenComponents." .

  
# General-purpose Resources
# These could be usable anywhere on the Semantic Web, not just in Semantic Flow meshes'

## Digital Artifact

<DigitalArtifact/> a rdfs:Class ;
  rdfs:subClassOf <MeshResource/> ;
  rdfs:label "Digital artifact" ;
  rdfs:comment "A mesh-governed artifact identity (something treated as a digital artifact in the abstract)." .

## Realizable + Realizations

<Realizable/> a rdfs:Class ;
  rdfs:label "Realizable" ;
  rdfs:comment "The essential, particular (at a point in time) content of a DigitalArtifact (e.g., an image, an ontology, a text file) that can be realized via one or more Realizations (e.g., files, streams)." .

<Realization/> a rdfs:Class ;
  rdfs:label "Realization" ;
  rdfs:comment "A representation/encoding/packaging of a Realizable DigitalArtifact, independent of any particular access endpoint." .


## Abstract files and streams

<AbstractFile/> a rdfs:Class ;
  rdfs:subClassOf <Realization/> ;
  rdfs:label "Abstract file" ;
  rdfs:comment "A file-form realization specification (format/syntax/canonicalization/bundling). May be mesh-governed or external." .

<AbstractStream/> a rdfs:Class ;
  rdfs:subClassOf <Realization/> ;
  rdfs:label "Abstract stream" ;
  rdfs:comment "A non-file realization specification (e.g., a stream or service-like packaging), reserved for future use." .

<hasAbstractFile/> a owl:ObjectProperty ;
  rdfs:domain <Realizable/> ;
  rdfs:range <AbstractFile/> ;
  rdfs:label "has abstract file" ;
  rdfs:comment "Links a Realizable resource to one of its AbstractFiles." .

<hasAbstractStream/> a owl:ObjectProperty ;
  rdfs:domain <Realizable/> ;
  rdfs:range <AbstractStream/> ;
  rdfs:label "has abstract stream" ;
  rdfs:comment "Links a Realizable resource to one of its AbstractStreams." .

## Located files (byte retrieval)

<LocatedFile/> a rdfs:Class ;
  rdfs:label "Located file" ;
  rdfs:comment "A retrievable bytes endpoint (typically with an extension), which may be in-mesh or external." .

<hasLocatedFile/> a owl:ObjectProperty ;
  rdfs:domain <AbstractFile/> ;
  rdfs:range <LocatedFile/> ;
  owl:inverseOf <locatesAbstractFile/> ;
  rdfs:label "has located file" ;
  rdfs:comment "Links an AbstractFile to one or more LocatedFiles that provide retrievable bytes." .

<locatesAbstractFile/> a owl:ObjectProperty ;
  rdfs:domain <LocatedFile/> ;
  rdfs:range <AbstractFile/> ;
  owl:inverseOf <hasLocatedFile/> ;
  rdfs:label "locates abstract file" ;
  rdfs:comment "Navigation: links a LocatedFile to an AbstractFile whose bytes it provides." .


## Resource Pages

<ResourcePage/> a rdfs:Class ;
  rdfs:subClassOf <LocatedFile/>, <MeshResource/>, schema:WebPage ;
  rdfs:label "Resource page file" ;
  rdfs:comment "A derived UI/navigation file (e.g., index.html) that presents a mesh-governed resource (or other referent) to humans." .

<hasResourcePage/> a owl:ObjectProperty ;
  rdfs:domain rdfs:Resource ;
  rdfs:range <ResourcePage/> ;
  rdfs:label "has resource page file" ;
  rdfs:comment "Associates any resource (including referents) with a human-readable presentation page." .

# Semantic Flow Artifacts

## Digital Artifacts kinds

<FlowArtifact/> a rdfs:Class ;
  rdfs:subClassOf <DigitalArtifact/> ;
  rdfs:label "Flow artifact" ;
  rdfs:comment "A mesh-managed artifact identity that organizes a sequence of revisions (represented as Slices)." .

<SimpleArtifact/> a rdfs:Class ;
  rdfs:subClassOf <DigitalArtifact/>, <Realizable/> ;
  rdfs:label "Simple artifact" ;
  rdfs:comment "A mesh-governed artifact identity treated as a single content unit (no revision history)." .

<artifactKind/> a owl:ObjectProperty ;
  rdfs:domain <DigitalArtifact/> ;
  rdfs:range rdfs:Class ;
  rdfs:label "artifact kind" ;
  rdfs:comment "Declares what kind of artifact this DigitalArtifact carries (e.g., RdfDataset)." .

## Artifact Files

<LocatedArtifactFile/> a rdfs:Class ;
  rdfs:subClassOf <LocatedFile/>, <MeshResource/> ;
  rdfs:label "Located artifact file" ;
  rdfs:comment "A mesh-governed LocatedFile that provides concrete bytes for a mesh-governed abstract artifact file." .

<AbstractArtifactFile/> a rdfs:Class ;
  rdfs:subClassOf <AbstractFile/>, <MeshResource/> ;
  rdfs:label "Abstract artifact file" ;
  rdfs:comment "A mesh-governed AbstractFile that participates in Semantic Flow's artifact modeling." .

<hasAbstractArtifactFile/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <hasAbstractFile/> ;
  rdfs:domain <Realizable/> ;
  rdfs:range <AbstractArtifactFile/> ;
  rdfs:label "has abstract artifact file" ;
  rdfs:comment "Links a Realizable resource to one of its mesh-governed AbstractArtifactFiles." .

<hasLocatedArtifactFile/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <hasLocatedFile/> ;
  rdfs:domain <AbstractArtifactFile/> ;
  rdfs:range <LocatedArtifactFile/> ;
  owl:inverseOf <locatesAbstractArtifactFile/> ;
  rdfs:label "has located artifact file" ;
  rdfs:comment "Links an AbstractArtifactFile to one or more mesh-governed LocatedArtifactFiles." .

<locatesAbstractArtifactFile/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <locatesAbstractFile/> ;
  rdfs:domain <LocatedArtifactFile/> ;
  rdfs:range <AbstractArtifactFile/> ;
  owl:inverseOf <hasLocatedArtifactFile/> ;
  rdfs:label "locates abstract artifact file" ;
  rdfs:comment "Navigation: links a LocatedArtifactFile to the AbstractArtifactFile whose bytes it provides." .


# Slices

<Slice/> a rdfs:Class ;
  rdfs:subClassOf <MeshResource/>, <Realizable/> ;
  rdfs:label "Slice" ;
  rdfs:comment "A particular revision member of a FlowArtifact. A Slice is content-bearing/realizable but is not a DigitalArtifact identity." .

<WorkingSlice/> a rdfs:Class ;
  rdfs:subClassOf <Slice/> ;
  rdfs:label "Working slice" ;
  rdfs:comment "Mutable current state for a FlowArtifact." .

<HistoricalSlice/> a rdfs:Class ;
  rdfs:subClassOf <Slice/> ;
  rdfs:label "Historical slice" ;
  rdfs:comment "Immutable published snapshot for a FlowArtifact." .

<hasSlice/> a owl:ObjectProperty ;
  rdfs:domain <FlowArtifact/> ;
  rdfs:range <Slice/> ;
  rdfs:label "has slice" ;
  rdfs:comment "Associates a FlowArtifact with one of its Slices." .

<currentSlice/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <hasSlice/> ;
  rdfs:domain <FlowArtifact/> ;
  rdfs:range <WorkingSlice/> ;
  rdfs:label "current slice" ;
  rdfs:comment "Associates a FlowArtifact with its current Slice." .

<previousSlice/> a owl:ObjectProperty ;
  rdfs:domain <Slice/> ;
  rdfs:range <Slice/> ;
  rdfs:label "previous slice" ;
  rdfs:comment "Links to the immediately-preceding Slice of this Slice." .

<nextSliceSequenceNumber/> a owl:DatatypeProperty ;
  rdfs:domain <FlowArtifact/> ;
  rdfs:range xsd:integer ;
  rdfs:label "next slice sequence number" ;
  rdfs:comment "Monotonic integer providing the next allocatable sequence number for a FlowArtifact." .


# Naming

<Nomen/> a rdfs:Class ;
  rdfs:subClassOf <ArtifactHost/> ;
  rdfs:label "Nomen" ;
  rdfs:comment "A naming-object resource (conventionally located at a reserved _nomen/ path) that records a meshPath token (interpreted relative to the mesh base) and ties that token to what it is about. A Nomen may specify, via ReferenceLinks, additional sources of reference data about what it is about. A Nomen may also function as a namespace prefix for subordinate Nomens under its path." .

<hasNomen/> a owl:ObjectProperty ;
  rdfs:domain <Mesh/> ;
  rdfs:range <Nomen/> ;
  rdfs:subPropertyOf dcterms:hasPart ;
  rdfs:label "has nomen"@en ;
  rdfs:comment "Asserts that a Nomen participates in (and is inventoried by) a Mesh's naming surface. This supports meshes whose naming vehicle exists independent of any filesystem serialization or dereferenceable publication."@en .

<NomenComponent/> a rdfs:Class ;
  rdfs:subClassOf <MeshResource/> ;
  rdfs:label "Nomen component" ;
  rdfs:comment "Reserved components under a Nomen (e.g., nomen flows, inventories)." .

<nomenFor/> a owl:ObjectProperty ;
  rdfs:domain <Nomen/> ;
  rdfs:range rdfs:Resource ;
  rdfs:label "nomen for" ;
  rdfs:comment "Asserted designator IRI for the Nomen. Usually matches the meshPath." .

<meshPath/> a owl:DatatypeProperty ;
  rdfs:domain <Nomen/> ;
  rdfs:range xsd:string ;
  rdfs:label "mesh path" ;
  rdfs:comment "Mesh-relative path token for the Nomen's designator. Interpreted relative to the mesh base. Use no leading slash. The empty string denotes the mesh root (i.e., the base itself)." .

<designates/> a owl:ObjectProperty ;
  rdfs:domain <Nomen/> ;
  rdfs:range rdfs:Resource ;
  rdfs:label "designates" ;
  rdfs:comment "Optional asserted designatum for the Nomen's designator token. If absent, the Nomen may be anchored only via ReferenceLinks (or used purely for namespacing / token management)." .

<hasChildNomen/> a owl:ObjectProperty ;
  rdfs:domain <Nomen/> ;
  rdfs:range <Nomen/> ;
  rdfs:label "has child nomen" ;
  rdfs:comment "Operational/derived listing of subordinate Nomens under this Nomen's namespace path. Not a source of truth; implementations may derive children from mesh structure and/or meshPath prefix rules." .


### Reference data links

<ReferenceLink/> a rdfs:Class ;
  rdfs:label "Reference link" ;
  rdfs:comment "A relator describing a reference-data link from a MeshResource to a specific reference data source, including role metadata." .

<ReferenceRole/> a rdfs:Class ;
  rdfs:label "Reference role" ;
  rdfs:comment "A controlled vocabulary of roles describing how a ReferenceLink should be used." .

<ReferenceRole/Canonical/> a <ReferenceRole/> ;
  rdfs:label "Canonical" .

<ReferenceRole/Integrate/> a <ReferenceRole/> ;
  rdfs:label "Integrate into resource page" .

<ReferenceRole/Supplemental/> a <ReferenceRole/> ;
  rdfs:label "Supplemental" .

<ReferenceRole/Deprecated/> a <ReferenceRole/> ;
  rdfs:label "Deprecated" .

<hasReferenceLink/> a owl:ObjectProperty ;
  rdfs:domain <ArtifactHost/> ;
  rdfs:range <ReferenceLink/> ;
  rdfs:label "has reference link" ;
  rdfs:comment "Links an ArtifactHost (Mesh, Nomen, Knop) to a ReferenceLink describing a specific reference-data source." .

<hasReferenceLink/> a owl:ObjectProperty ;
  rdfs:domain <MeshResource/> ;
  rdfs:range <ReferenceLink/> ;
  owl:inverseOf <referenceLinkFor/> ;
  rdfs:label "has reference link"@en ;
  rdfs:comment "Associates a mesh-governed resource with a ReferenceLink that provides external or supporting reference information about it." .

<referenceLinkFor/> a owl:ObjectProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range <MeshResource/> ;
  owl:inverseOf <hasReferenceLink/> ;
  rdfs:label "reference link for"@en ;
  rdfs:comment "Identifies the mesh-governed resource that a ReferenceLink is about." .

<referenceTarget/> a owl:ObjectProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range rdfs:Resource ;
  rdfs:label "reference target" ;
  rdfs:comment "If present, the reference target is a node used as a reference-data identifier (often a mesh-governed artifact/file identifier, but it may also be an external identifier)." .

<referenceUriLiteral/> a owl:DatatypeProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range xsd:anyURI ;
  rdfs:label "reference URI literal" ;
  rdfs:comment "If present, a retrievable location for reference data (without asserting denotation). May be used alongside referenceTarget or alone." .

### Verification metadata

<lastVerifiedAt/> a owl:DatatypeProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range xsd:dateTimeStamp ;
  rdfs:label "last verified at" ;
  rdfs:comment "Most recent verification timestamp for this reference link." .

<lastVerifiedBy/> a owl:ObjectProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range rdfs:Resource ;
  rdfs:label "last verified by" ;
  rdfs:comment "Agent responsible for the most recent verification of this reference link." .


# Knops + flows

<Knop/> a rdfs:Class ;
  rdfs:subClassOf <ArtifactHost/> ;
  rdfs:label "Knop" ;
  rdfs:comment "A container for DigitalArtifacts anchored at a stable in-mesh location; hosts payload and supporting FlowArtifacts and SimpleArtifacts." .

<hasKnop/> a owl:ObjectProperty ;
  rdfs:domain <Mesh/> ;
  rdfs:range <Knop/> ;
  rdfs:subPropertyOf dcterms:hasPart ;
  rdfs:label "has knop"@en ;
  rdfs:comment "Asserts that a Knop is a member of (and is inventoried by) a Mesh. This is a semantic containment/inventory assertion, not a filesystem directory listing, and can apply to meshes that exist only in memory."@en .

<KnopComponent/> a rdfs:Class ;
  rdfs:subClassOf <MeshResource/> ;
  rdfs:label "Knop component" ;
  rdfs:comment "Reserved components under a Knop (payload/supporting flows and their parts)." .

<FlowPayload/> a rdfs:Class ;
  rdfs:subClassOf <FlowArtifact/>, <KnopComponent/> ;
  rdfs:label "Payload flow" ;
  rdfs:comment "The primary FlowArtifact hosted by a Knop." .

<SimplePayload/> a rdfs:Class ;
  rdfs:subClassOf <SimpleArtifact/>, <KnopComponent/> ;
  rdfs:label "Payload artifact" ;
  rdfs:comment "A primary (simple) artifact hosted directly by a Knop, for cases where the payload is not managed as a FlowArtifact." .

<hasPayload/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <containsMeshResource/> ;
  rdfs:domain <Knop/> ;
  rdfs:range <DigitalArtifact/> ;
  rdfs:label "contains payload" ;
  rdfs:comment "Links a Knop to its primary payload artifact identity (either a FlowArtifact-based payload or a SimpleArtifact-based payload)." .

<containsFlowPayload/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <hasPayload/> ;
  rdfs:domain <Knop/> ;
  rdfs:range <FlowPayload/> ;
  rdfs:label "contains flow payload" ;
  rdfs:comment "Links a Knop to its payload when the payload is modeled as a FlowArtifact (FlowPayload)." .

<containsSimplePayload/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <hasPayload/> ;
  rdfs:domain <Knop/> ;
  rdfs:range <SimplePayload/> ;
  rdfs:label "contains simple payload" ;
  rdfs:comment "Links a Knop to its payload when the payload is modeled as a SimpleArtifact (SimplePayload)." .

# Metadata

<KnopMetadataFlow/> a rdfs:Class ;
  rdfs:subClassOf <FlowArtifact/>, <KnopComponent/> ;
  rdfs:label "Knop metadata flow" ;
  rdfs:comment "Small, discoverable: structure/pointers/summary inventory for the Knop." .

<MeshMetadataFlow/> a rdfs:Class ;
  rdfs:subClassOf <FlowArtifact/>, <MeshComponent/> ;
  rdfs:label "Mesh metadata flow" ;
  rdfs:comment "Optional mesh-level operational metadata/config." .

<NomenMetadataFlow/> a rdfs:Class ;
  rdfs:subClassOf <FlowArtifact/>, <NomenComponent/> ;
  rdfs:label "Nomen metadata flow" ;
  rdfs:comment "Metadata about a Nomen; may remain WorkingSlice-only until history is recorded." .

<containsKnopMetadataFlow/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <containsMeshResource/> ;
  rdfs:domain <Knop/> ;
  rdfs:range <KnopMetadataFlow/> ;
  rdfs:label "contains knop metadata flow" ;
  rdfs:comment "Links a Knop to its knop metadata flow (if present)." .

<containsMeshMetadataFlow/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <containsMeshResource/> ;
  rdfs:domain <Mesh/> ;
  rdfs:range <MeshMetadataFlow/> ;
  rdfs:label "contains mesh metadata flow" ;
  rdfs:comment "Links a Mesh to its mesh metadata flow (if present)." .

<containsNomenMetadataFlow/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <containsMeshResource/> ;
  rdfs:domain <Nomen/> ;
  rdfs:range <NomenMetadataFlow/> ;
  rdfs:label "contains nomen metadata flow" ;
  rdfs:comment "Links a Nomen to its nomen metadata flow (if present)." .


# RDF datasets 

<RdfDataset/> a rdfs:Class ;
  rdfs:subClassOf <SimpleArtifact/>, dcat:Dataset ;
  rdfs:label "RDF dataset" ;
  rdfs:comment "A SimpleArtifact whose content is an RDF dataset (default graph + 0..n named graphs)." .

# Inventories


<MeshInventoryDataset/> a rdfs:Class ;
  rdfs:subClassOf <RdfDataset/>, <MeshComponent/>, <SimpleArtifact/> ;
  rdfs:label "Mesh inventory dataset" ;
  rdfs:comment "Optional derived index for explorability at the mesh level (non-flow; may be large/sharded)." .

<KnopInventoryDataset/> a rdfs:Class ;
  rdfs:subClassOf <RdfDataset/>, <KnopComponent/>, <SimpleArtifact/> ;
  rdfs:label "Knop inventory dataset" ;
  rdfs:comment "Optional derived index for explorability at the knop level (non-flow; may be large/sharded)." .

<NomenInventoryDataset/> a rdfs:Class ;
  rdfs:subClassOf <RdfDataset/>, <NomenComponent/>, <SimpleArtifact/> ;
  rdfs:label "Nomen inventory dataset" ;
  rdfs:comment "Optional derived index for explorability at the nomen level (non-flow; may be large/sharded)." .
