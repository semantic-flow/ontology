@base <https://semantic-flow.github.io/semantic-flow-ontology/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix schema: <https://schema.org/> .
@prefix vann: <http://purl.org/vocab/vann/> .

<> a owl:Ontology ;
  dcterms:title "Semantic Flow Ontology" ;
  dcterms:description "The Semantic Flow ontology defines the classes and properties used for defining and describing semantic meshes and their resources." ;
  dcterms:creator <https://djradon.github.io/ns/djradon/> ;
  owl:versionInfo "0.0.1" ;
  owl:versionIRI <https://semantic-flow.github.io/semantic-flow-ontology/_knops/_payload/_working/sflo.ttl/sflo.ttl> ;
  vann:preferredNamespacePrefix "sflo" ;
  vann:preferredNamespaceUri <https://semantic-flow.github.io/semantic-flow-ontology/> .

<MeshResource/> a rdfs:Class ;
  rdfs:label "Mesh resource" ;
  rdfs:comment "A resource that is included in a Mesh and governed by Semantic Flow mesh conventions." .

<Mesh/> a rdfs:Class ;
  rdfs:subClassOf <AbstractResource/>, <MeshResource/> ;
  rdfs:label "Mesh" ;
  rdfs:comment "A servable filesystem region addressed as an AbstractResource (conventionally via a reserved _mesh/ path) that contains MeshResources and, optionally, other supporting resources." .

<AbstractResource/> a rdfs:Class ;
  rdfs:label "Abstract resource" ;
  rdfs:comment "A slash-terminated IRI whose dereference yields a resource page." .

<LocatedFile/> a rdfs:Class, <TargetKind/> ;
  rdfs:label "Located file" ;
  rdfs:comment "A file IRI (typically with an extension) intended to retrieve concrete bytes." .

<ResourcePage/> a rdfs:Class ;
  rdfs:subClassOf <LocatedFile/>, <MeshResource/>, schema:WebPage ;
  rdfs:label "Resource page file" ;
  rdfs:comment "A derived UI/navigation file (e.g., index.html) that presents an AbstractResource (or other referent) to humans." .

<ArtifactLocatedFile/> a rdfs:Class, <TargetKind/> ;
  rdfs:subClassOf <LocatedFile/>, <MeshResource/> ;
  rdfs:label "Artifact located file" ;
  rdfs:comment "A LocatedFile that is a concrete realization of an AbstractFile." .

<AssetFile/> a rdfs:Class ;
  rdfs:subClassOf <LocatedFile/> ;
  rdfs:label "Asset file" ;
  rdfs:comment "A non-artifact support file used by resource pages (images/css/js), conventionally under _assets/." .

<OperationalLogFile/> a rdfs:Class ;
  rdfs:subClassOf <LocatedFile/> ;
  rdfs:label "Operational log file" ;
  rdfs:comment "A plain tool log file (not discourse-worthy by default)." .

<MeshComponent/> a rdfs:Class ;
  rdfs:subClassOf <AbstractResource/>, <MeshResource/> ;
  rdfs:label "Mesh component" ;
  rdfs:comment "A reserved, mesh-scoped structural resource (e.g., the _mesh/ handle, mesh-level metadata, mesh inventory)." .

<containsMeshResource/> a owl:ObjectProperty ;
  rdfs:domain <MeshResource/> ;
  rdfs:range <MeshResource/> ;
  rdfs:label "contains mesh resource" ;
  rdfs:comment "Structural containment relation for resources that are included in the same Mesh (governed by Semantic Flow mesh conventions)." .

<hasResourcePage/> a owl:ObjectProperty ;
  rdfs:domain rdfs:Resource ;
  rdfs:range <ResourcePage/> ;
  rdfs:label "has resource page file" ;
  rdfs:comment "Associates any resource (including referents) with a human-readable presentation page." .


### Naming

<Nomen/> a rdfs:Class, <TargetKind/> ;
  rdfs:subClassOf <AbstractResource/>, <MeshResource/> ;
  rdfs:label "Nomen" ;
  rdfs:comment "A naming-object resource (conventionally located at a reserved _nomen/ path) that records a meshPath token (interpreted relative to the mesh base) and ties that token to what it is about. A Nomen may specify, via ReferenceLinks, additional sources of reference data about what it is about. A Nomen may also function as a namespace prefix for subordinate Nomens under its path." .

<NomenComponent/> a rdfs:Class ;
  rdfs:subClassOf <AbstractResource/>, <MeshResource/> ;
  rdfs:label "Nomen component" ;
  rdfs:comment "Reserved components under a Nomen (e.g., nomen flows, inventories)." .

<meshPath/> a owl:DatatypeProperty ;
  rdfs:domain <Nomen/> ;
  rdfs:range xsd:string ;
  rdfs:label "mesh path" ;
  rdfs:comment "Mesh-relative path token for the Nomen's designator. Interpreted relative to the mesh base. Use no leading slash. The empty string denotes the mesh root (i.e., the base itself)." .

<designates/> a owl:ObjectProperty ;
  rdfs:domain <Nomen/> ;
  rdfs:range rdfs:Resource ;
  rdfs:label "designates" ;
  rdfs:comment "Optional asserted designatum for the Nomen's designator token. If absent, the Nomen may be anchored only via ReferenceLinks (or used purely for namespacing / token management)." .

### Reference data links

<ReferenceLink/> a rdfs:Class ;
  rdfs:label "Reference link" ;
  rdfs:comment "A relator describing a reference-data link from a Nomen to a specific reference data source, including expectations and role metadata." .

<ReferenceRole/> a rdfs:Class ;
  rdfs:label "Reference role" ;
  rdfs:comment "A controlled vocabulary of roles describing how a ReferenceLink should be used." .

<TargetKind/> a rdfs:Class ;
  rdfs:label "Target kind" ;
  rdfs:comment "A metaclass used to constrain expected target kinds for ReferenceLinks (via punning)." .

<ReferenceRoleCanonical/> a <ReferenceRole/> ;
  rdfs:label "Canonical" .

<ReferenceRoleIntegrate/> a <ReferenceRole/> ;
  rdfs:label "Integrate into resource page" .

<ReferenceRoleSupplemental/> a <ReferenceRole/> ;
  rdfs:label "Supplemental" .

<ReferenceRoleDeprecated/> a <ReferenceRole/> ;
  rdfs:label "Deprecated" .

<hasReferenceLink/> a owl:ObjectProperty ;
  rdfs:domain <Nomen/> ;
  rdfs:range <ReferenceLink/> ;
  rdfs:label "has reference link" ;
  rdfs:comment "Links a Nomen to a ReferenceLink describing a specific reference-data source." .

<referenceLinkForNomen/> a owl:ObjectProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range <Nomen/> ;
  owl:inverseOf <hasReferenceLink/> ;
  rdfs:label "reference link for nomen" ;
  rdfs:comment "Inverse of hasReferenceLink: identifies the Nomen a ReferenceLink is about." .

<referenceRole/> a owl:ObjectProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range <ReferenceRole/> ;
  rdfs:label "reference role" ;
  rdfs:comment "Assigns one or more roles to a ReferenceLink (e.g., Canonical, Integrate, Supplemental, Deprecated)." .

<referenceTarget/> a owl:ObjectProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range rdfs:Resource ;
  rdfs:label "reference target" ;
  rdfs:comment "If present, the reference target is expected to denote a reference-data source artifact (typically a Flow, Slice, AbstractFile, or LocatedFile), or an external identifier used as a retrieval handle." .

<targetUriLiteral/> a owl:DatatypeProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range xsd:anyURI ;
  rdfs:label "reference target URI literal" ;
  rdfs:comment "If only this is present, it is expected to locate retrievable content (without assuming denotation)." .

<expectedTargetKind/> a owl:ObjectProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range <TargetKind/> ;
  rdfs:label "expected target kind" ;
  rdfs:comment "Expected kind of the reference target (e.g., Flow, Slice, AbstractFile, ArtifactLocatedFile, LocatedFile)." .


### Mesh base

<meshBase/> a owl:DatatypeProperty ;
  rdfs:domain <Mesh/> ;
  rdfs:range xsd:anyURI ;
  rdfs:label "Mesh Base" ;
  rdfs:comment "A mesh's canonical BASE (publish location). Represented as a URI literal to avoid asserting anything about the denoted thing." .


### Verification metadata

<lastVerifiedAt/> a owl:DatatypeProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range xsd:dateTimeStamp ;
  rdfs:label "last verified at" ;
  rdfs:comment "Most recent verification timestamp for this reference link." .

<lastVerifiedBy/> a owl:ObjectProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range rdfs:Resource ;
  rdfs:label "last verified by" ;
  rdfs:comment "Agent responsible for the most recent verification of this reference link." .


### Knops, flows, slices, files

<Knop/> a rdfs:Class ;
  rdfs:subClassOf <AbstractResource/>, <MeshResource/> ;
  rdfs:label "Knop" ;
  rdfs:comment "SF container anchored at a stable in-mesh location; hosts payload and supporting flows." .

<KnopComponent/> a rdfs:Class ;
  rdfs:subClassOf <AbstractResource/>, <MeshResource/> ;
  rdfs:label "Knop component" ;
  rdfs:comment "Reserved components under a Knop (payload/supporting flows and their parts)." .

<Flow/> a rdfs:Class, <TargetKind/> ;
  rdfs:subClassOf <AbstractResource/>, <MeshResource/> ;
  rdfs:label "Flow" ;
  rdfs:comment "Artifact over revisions; organizes Slices and provides a stable artifact identity." .

<artifactKind/> a owl:ObjectProperty ;
  rdfs:domain <Flow/> ;
  rdfs:range rdfs:Resource ;
  rdfs:label "artifact kind" ;
  rdfs:comment "Declares what kind of artifact this Flow carries (e.g., RdfDataset, Image, Text)." .

<Slice/> a rdfs:Class, <TargetKind/> ;
  rdfs:subClassOf <AbstractResource/>, <MeshResource/> ;
  rdfs:label "Slice" ;
  rdfs:comment "A particular revision of the artifact represented by a Flow." .

<WorkingSlice/> a rdfs:Class ;
  rdfs:subClassOf <Slice/> ;
  rdfs:label "Working slice" ;
  rdfs:comment "Mutable current state for a Flow." .

<HistoricalSlice/> a rdfs:Class ;
  rdfs:subClassOf <Slice/> ;
  rdfs:label "Historical slice" ;
  rdfs:comment "Immutable published snapshot for a Flow." .

<AbstractFile/> a rdfs:Class, <TargetKind/> ;
  rdfs:subClassOf <AbstractResource/>, <MeshResource/> ;
  rdfs:label "Abstract file" ;
  rdfs:comment "A representation specification of a Slice (format/syntax/canonicalization/bundling)." .

<hasSlice/> a owl:ObjectProperty ;
  rdfs:domain <Flow/> ;
  rdfs:range <Slice/> ;
  rdfs:label "has slice" ;
  rdfs:comment "Associates a Flow with one of its Slices." .

<currentSlice/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <hasSlice/> ;
  rdfs:domain <Flow/> ;
  rdfs:range <Slice/> ;
  rdfs:label "current slice" ;
  rdfs:comment "Associates a Flow with its current Slice (often the WorkingSlice)." .

<previousSlice/> a owl:ObjectProperty ;
  rdfs:domain <Slice/> ;
  rdfs:range <Slice/> ;
  rdfs:label "previous slice" ;
  rdfs:comment "Links to the immediately-preceding Slice of this Slice." .

<nextSliceSequenceNumber/> a owl:DatatypeProperty ;
  rdfs:domain <Flow/> ;
  rdfs:range xsd:integer ;
  rdfs:label "next slice sequence number" ;
  rdfs:comment "Monotonic integer providing the next allocatable sequence number for a Flow." .

<hasAbstractFile/> a owl:ObjectProperty ;
  rdfs:domain <Slice/> ;
  rdfs:range <AbstractFile/> ;
  rdfs:label "has abstract file" ;
  rdfs:comment "Links a Slice to one of its AbstractFiles." .

<hasCanonicalArtifactLocatedFile/> a owl:ObjectProperty ;
  rdfs:domain <AbstractFile/> ;
  rdfs:range <ArtifactLocatedFile/> ;
  rdfs:label "has canonical artifact located file" ;
  rdfs:comment "Links an AbstractFile to its canonical ArtifactLocatedFile (preferred byte retrieval endpoint)." .

<realizesAbstractFile/> a owl:ObjectProperty ;
  rdfs:domain <ArtifactLocatedFile/> ;
  rdfs:range <AbstractFile/> ;
  rdfs:label "realizes abstract file" ;
  rdfs:comment "Links an ArtifactLocatedFile to the AbstractFile it realizes (enables navigation without path heuristics)." .

<DatasetSeries/> a rdfs:Class ;
  rdfs:subClassOf <AbstractResource/>, <MeshResource/>, dcat:DatasetSeries ;
  rdfs:label "Dataset series" ;
  rdfs:comment "A series/partitioning of related dataset artifacts." .

<PayloadFlow/> a rdfs:Class ;
  rdfs:subClassOf <Flow/>, <KnopComponent/> ;
  rdfs:label "Payload flow" ;
  rdfs:comment "The primary digital-artifact flow hosted by a Knop." .

<KnopMetadataFlow/> a rdfs:Class ;
  rdfs:subClassOf <Flow/>, <KnopComponent/> ;
  rdfs:label "Knop metadata flow" ;
  rdfs:comment "Small, discoverable: structure/pointers/summary inventory for the Knop." .

<MeshMetadataFlow/> a rdfs:Class ;
  rdfs:subClassOf <Flow/>, <MeshComponent/> ;
  rdfs:label "Mesh metadata flow" ;
  rdfs:comment "Optional mesh-level operational metadata/config." .

<NomenMetadataFlow/> a rdfs:Class ;
  rdfs:subClassOf <Flow/>, <NomenComponent/> ;
  rdfs:label "Nomen metadata flow" ;
  rdfs:comment "Metadata about a Nomen; may remain WorkingSlice-only until history is recorded." .

<hasNomenMetadataFlow/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <containsMeshResource/> ;
  rdfs:domain <Nomen/> ;
  rdfs:range <NomenMetadataFlow/> ;
  rdfs:label "has nomen metadata flow" ;
  rdfs:comment "Links a Nomen to its nomen metadata flow (if present)." .

<hasPayloadFlow/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <containsMeshResource/> ;
  rdfs:domain <Knop/> ;
  rdfs:range <PayloadFlow/> ;
  rdfs:label "has payload flow" ;
  rdfs:comment "Links a Knop to its required payload flow." .

<hasKnopMetadataFlow/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <containsMeshResource/> ;
  rdfs:domain <Knop/> ;
  rdfs:range <KnopMetadataFlow/> ;
  rdfs:label "has knop metadata flow" ;
  rdfs:comment "Links a Knop to its knop metadata flow (if present)." .

<hasMeshMetadataFlow/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <containsMeshResource/> ;
  rdfs:domain <Mesh/> ;
  rdfs:range <MeshMetadataFlow/> ;
  rdfs:label "has mesh metadata flow" ;
  rdfs:comment "Links a Mesh to its mesh metadata flow (if present)." .

<RdfDataset/> a rdfs:Class ;
  rdfs:subClassOf dcat:Dataset ;
  rdfs:label "RDF dataset" ;
  rdfs:comment "RDF dataset content: default graph + 0..n named graphs; default graph may be empty." .

<MeshInventoryDataset/> a rdfs:Class ;
  rdfs:subClassOf <RdfDataset/>, <MeshComponent/> ;
  rdfs:label "Mesh inventory dataset" ;
  rdfs:comment "Optional derived index for explorability at the mesh level (non-flow; may be large/sharded)." .

<KnopInventoryDataset/> a rdfs:Class ;
  rdfs:subClassOf <RdfDataset/>, <KnopComponent/> ;
  rdfs:label "Knop inventory dataset" ;
  rdfs:comment "Optional derived index for explorability at the knop level (non-flow; may be large/sharded)." .

<NomenInventoryDataset/> a rdfs:Class ;
  rdfs:subClassOf <RdfDataset/>, <NomenComponent/> ;
  rdfs:label "Nomen inventory dataset" ;
  rdfs:comment "Optional derived index for explorability at the nomen level (non-flow; may be large/sharded)." .
