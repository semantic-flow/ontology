@base <https://semantic-flow.github.io/semantic-flow-ontology/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix schema: <https://schema.org/> .
@prefix vann: <http://purl.org/vocab/vann/> .

<> a owl:Ontology ;
  dcterms:title "Semantic Flow Ontology" ;
  dcterms:description "The Semantic Flow ontology defines the classes and properties used for defining and describing semantic meshes and their resources." ;
  dcterms:creator <https://djradon.github.io/ns/djradon/> ;
  owl:versionInfo "0.0.1" ;
  owl:versionIRI <https://semantic-flow.github.io/semantic-flow-ontology/_knops/_payload/_working/sflo.ttl/sflo.ttl> ;
  vann:preferredNamespacePrefix "sflo" ;
  vann:preferredNamespaceUri <https://semantic-flow.github.io/semantic-flow-ontology/> .

<SemanticFlowResource/> a rdfs:Class ;
  rdfs:label "Semantic Flow resource" ;
  rdfs:comment "Any resource participating in Semantic Flow conventions." .

<Mesh/> a rdfs:Class ;
  rdfs:label "Mesh" ;
  rdfs:comment "A servable filesystem region that contains SemanticFlowResources and, optionally, other supporting resources." .

<AbstractResource/> a rdfs:Class ;
  rdfs:subClassOf <SemanticFlowResource/> ;
  rdfs:label "Abstract resource" ;
  rdfs:comment "A slash-terminated IRI whose dereference yields a resource page." .

<LocatedFile/> a rdfs:Class, <TargetKind/> ;
  rdfs:subClassOf <SemanticFlowResource/> ;
  rdfs:label "Located file" ;
  rdfs:comment "A file IRI (typically with an extension) intended to retrieve concrete bytes." .

<ResourcePage/> a rdfs:Class ;
  rdfs:subClassOf <LocatedFile/>, <SemanticFlowResource/>, schema:WebPage ;
  rdfs:label "Resource page file" ;
  rdfs:comment "A derived UI/navigation file (e.g., index.html) that presents an AbstractResource (or other referent) to humans." .

<ArtifactLocatedFile/> a rdfs:Class, <TargetKind/> ;
  rdfs:subClassOf <LocatedFile/>, <SemanticFlowResource/> ;
  rdfs:label "Artifact located file" ;
  rdfs:comment "A LocatedFile that is a concrete realization of an AbstractFile." .

<AssetFile/> a rdfs:Class ;
  rdfs:subClassOf <LocatedFile/> ;
  rdfs:label "Asset file" ;
  rdfs:comment "A non-artifact support file used by resource pages (images/css/js), conventionally under _assets/." .

<OperationalLogFile/> a rdfs:Class ;
  rdfs:subClassOf <LocatedFile/> ;
  rdfs:label "Operational log file" ;
  rdfs:comment "A plain tool log file (not discourse-worthy by default)." .

<MeshComponent/> a rdfs:Class ;
  rdfs:subClassOf <AbstractResource/> ;
  rdfs:label "Mesh component" ;
  rdfs:comment "A reserved underscore-path/system resource (e.g., _mesh/, _knops/, _assets/, inventories, configs)." .

<containsSfloResource/> a owl:ObjectProperty ;
  rdfs:domain <AbstractResource/> ;
  rdfs:range <SemanticFlowResource/> ;
  rdfs:label "contains Semantic Flow resource" ;
  rdfs:comment "Structural containment relation for SF-governed resources (typically within reserved or conventional SF paths)." .

<hasResourcePage/> a owl:ObjectProperty ;
  rdfs:domain rdfs:Resource ;
  rdfs:range <ResourcePage/> ;
  rdfs:label "has resource page file" ;
  rdfs:comment "Associates any resource (including referents) with a human-readable presentation page." .


### Naming

<Nomen/> a rdfs:Class, <TargetKind/> ;
  rdfs:subClassOf <AbstractResource/> ;
  rdfs:label "Nomen" ;
  rdfs:comment "A naming-object resource (conventionally at a reserved _nomen/ path) that records a designator token and ties it to what that token is about. A Nomen may also function as a namespace prefix for subordinate Nomens under its path." .

<NomenComponent/> a rdfs:Class ;
  rdfs:subClassOf <MeshComponent/> ;
  rdfs:label "Nomen component" ;
  rdfs:comment "Reserved components under a Nomen (e.g., nomen flows, inventories)." .

<iriRef/> a owl:DatatypeProperty ;
  rdfs:domain <Nomen/> ;
  rdfs:range xsd:string ;
  rdfs:label "designator IRI reference" ;
  rdfs:comment "A string form of the designator token, intended to be interpreted relative to the mesh base (e.g., 'people/alice/' or './people/alice/')." .

<designates/> a owl:ObjectProperty ;
  rdfs:domain <Nomen/> ;
  rdfs:range rdfs:Resource ;
  rdfs:label "designates" ;
  rdfs:comment "Primary designatum for the Nomen's designator token. This is the normative semantic tie: without it, a Nomen is not semantically anchored." .

<denotes/> a owl:ObjectProperty ;
  rdfs:domain <Nomen/> ;
  rdfs:range rdfs:Resource ;
  rdfs:label "denotes" ;
  rdfs:comment "Optional additional denotations for the Nomen's designator token. May point to an in-mesh digital artifact (e.g., a Knop/Flow/LocatedFile) or to an external identifier as a soft alias, including aliasing another same-mesh Nomen. Not intended to assert strict identity; use owl:sameAs for strict identity." .


### Reference data links

<ReferenceLink/> a rdfs:Class ;
  rdfs:label "Reference link" ;
  rdfs:comment "A relator describing a reference-data link from a Nomen to a specific reference data source, including expectations and role metadata." .

<ReferenceRole/> a rdfs:Class ;
  rdfs:label "Reference role" ;
  rdfs:comment "A controlled vocabulary of roles describing how a ReferenceLink should be used." .

<TargetKind/> a rdfs:Class ;
  rdfs:label "Target kind" ;
  rdfs:comment "A metaclass used to constrain expected target kinds for ReferenceLinks (via punning)." .

<ReferenceRoleCanonical/> a <ReferenceRole/> ;
  rdfs:label "Canonical" .

<ReferenceRoleIntegrate/> a <ReferenceRole/> ;
  rdfs:label "Integrate into resource page" .

<ReferenceRoleSupplemental/> a <ReferenceRole/> ;
  rdfs:label "Supplemental" .

<ReferenceRoleDeprecated/> a <ReferenceRole/> ;
  rdfs:label "Deprecated" .

<hasReferenceLink/> a owl:ObjectProperty ;
  rdfs:domain <Nomen/> ;
  rdfs:range <ReferenceLink/> ;
  rdfs:label "has reference link" ;
  rdfs:comment "Links a Nomen to a ReferenceLink describing a specific reference-data source." .

<referenceLinkForNomen/> a owl:ObjectProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range <Nomen/> ;
  owl:inverseOf <hasReferenceLink/> ;
  rdfs:label "reference link for nomen" ;
  rdfs:comment "Inverse of hasReferenceLink: identifies the Nomen a ReferenceLink is about." .

<referenceRole/> a owl:ObjectProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range <ReferenceRole/> ;
  rdfs:label "reference role" ;
  rdfs:comment "Assigns one or more roles to a ReferenceLink (e.g., Canonical, Integrate, Supplemental, Deprecated)." .

<target/> a owl:ObjectProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range rdfs:Resource ;
  rdfs:label "target" ;
  rdfs:comment "If present, the target is expected to denote a reference-data source." .

<targetUriLiteral/> a owl:DatatypeProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range xsd:anyURI ;
  rdfs:label "target URI literal" ;
  rdfs:comment "If only this is present, it is expected to locate retrievable content (without assuming denotation)." .

<expectedTargetKind/> a owl:ObjectProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range <TargetKind/> ;
  rdfs:label "expected target kind" ;
  rdfs:comment "Expected kind of the target (e.g., Nomen, Flow, Slice, AbstractFile, ArtifactLocatedFile, LocatedFile)." .


### Mesh base

<meshBase/> a owl:DatatypeProperty ;
  rdfs:domain <Mesh/> ;
  rdfs:range xsd:anyURI ;
  rdfs:label "Mesh Base" ;
  rdfs:comment "A mesh's canonical BASE (publish location). Represented as a URI literal to avoid asserting anything about the denoted thing." .


### Verification metadata

<lastVerifiedAt/> a owl:DatatypeProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range xsd:dateTimeStamp ;
  rdfs:label "last verified at" ;
  rdfs:comment "Most recent verification timestamp for this reference link." .

<lastVerifiedBy/> a owl:ObjectProperty ;
  rdfs:domain <ReferenceLink/> ;
  rdfs:range rdfs:Resource ;
  rdfs:label "last verified by" ;
  rdfs:comment "Agent responsible for the most recent verification of this reference link." .


### Knops, flows, slices, files

<Knop/> a rdfs:Class ;
  rdfs:subClassOf <AbstractResource/> ;
  rdfs:label "Knop" ;
  rdfs:comment "SF container anchored at a stable in-mesh location; hosts payload and supporting flows." .

<KnopComponent/> a rdfs:Class ;
  rdfs:subClassOf <AbstractResource/>, <MeshComponent/> ;
  rdfs:label "Knop component" ;
  rdfs:comment "Reserved components under a Knop (payload/supporting flows and their parts)." .

<hasKnopComponent/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <containsSfloResource/> ;
  rdfs:domain <Knop/> ;
  rdfs:range <KnopComponent/> ;
  rdfs:label "has knop component" ;
  rdfs:comment "Associates a Knop with one of its directly contained KnopComponents." .

<Flow/> a rdfs:Class, <TargetKind/> ;
  rdfs:subClassOf <AbstractResource/> ;
  rdfs:label "Flow" ;
  rdfs:comment "Artifact over revisions; organizes Slices and provides a stable artifact identity." .

<KnopFlow/> a rdfs:Class ;
  rdfs:subClassOf <Flow/>, <KnopComponent/> ;
  rdfs:label "Knop flow" ;
  rdfs:comment "A Flow that is a component of a Knop." .

<NomenFlow/> a rdfs:Class ;
  rdfs:subClassOf <Flow/>, <NomenComponent/> ;
  rdfs:label "Nomen flow" ;
  rdfs:comment "A Flow that is a component of a Nomen." .

<MeshFlow/> a rdfs:Class ;
  rdfs:subClassOf <Flow/>, <MeshComponent/> ;
  rdfs:label "Mesh flow" ;
  rdfs:comment "A Flow that is a component of the mesh (mesh-level)." .

<artifactKind/> a owl:ObjectProperty ;
  rdfs:domain <Flow/> ;
  rdfs:range rdfs:Resource ;
  rdfs:label "artifact kind" ;
  rdfs:comment "Declares what kind of artifact this Flow carries (e.g., RdfDataset, RdfGraph, Image, Text)." .

<Slice/> a rdfs:Class, <TargetKind/> ;
  rdfs:subClassOf <AbstractResource/>, <MeshComponent/> ;
  rdfs:label "Slice" ;
  rdfs:comment "A particular revision of the artifact represented by a Flow." .

<WorkingSlice/> a rdfs:Class ;
  rdfs:subClassOf <Slice/> ;
  rdfs:label "Working slice" ;
  rdfs:comment "Mutable current state for a Flow." .

<HistoricalSlice/> a rdfs:Class ;
  rdfs:subClassOf <Slice/> ;
  rdfs:label "Historical slice" ;
  rdfs:comment "Immutable published snapshot for a Flow." .

<AbstractFile/> a rdfs:Class, <TargetKind/> ;
  rdfs:subClassOf <AbstractResource/>, <MeshComponent/> ;
  rdfs:label "Abstract file" ;
  rdfs:comment "A representation specification of a Slice (format/syntax/canonicalization/bundling)." .

<hasFlow/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <hasKnopComponent/> ;
  rdfs:domain <Knop/> ;
  rdfs:range <Flow/> ;
  rdfs:label "has flow" ;
  rdfs:comment "Links a Knop to one of its contained flows." .

<hasSlice/> a owl:ObjectProperty ;
  rdfs:domain <Flow/> ;
  rdfs:range <Slice/> ;
  rdfs:label "has slice" ;
  rdfs:comment "Associates a Flow with one of its Slices." .

<currentSlice/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <hasSlice/> ;
  rdfs:domain <Flow/> ;
  rdfs:range <Slice/> ;
  rdfs:label "current slice" ;
  rdfs:comment "Associates a Flow with its current Slice (often the WorkingSlice)." .

<previousSlice/> a owl:ObjectProperty ;
  rdfs:domain <Slice/> ;
  rdfs:range <Slice/> ;
  rdfs:label "previous slice" ;
  rdfs:comment "Links to the immediately-preceding Slice of this Slice." .

<nextSliceSequenceNumber/> a owl:DatatypeProperty ;
  rdfs:domain <Flow/> ;
  rdfs:range xsd:integer ;
  rdfs:label "next slice sequence number" ;
  rdfs:comment "Monotonic integer providing the next allocatable sequence number for a Flow." .

<hasAbstractFile/> a owl:ObjectProperty ;
  rdfs:domain <Slice/> ;
  rdfs:range <AbstractFile/> ;
  rdfs:label "has abstract file" ;
  rdfs:comment "Links a Slice to one of its AbstractFiles." .

<hasLocatedFile/> a owl:ObjectProperty ;
  rdfs:domain <AbstractFile/> ;
  rdfs:range <LocatedFile/> ;
  rdfs:label "has located file" ;
  rdfs:comment "Links an AbstractFile to a LocatedFile endpoint that retrieves bytes." .

<hasCanonicalLocatedFile/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <hasLocatedFile/> ;
  rdfs:domain <AbstractFile/> ;
  rdfs:range <ArtifactLocatedFile/> ;
  rdfs:label "has canonical located file" ;
  rdfs:comment "Links an AbstractFile to its canonical ArtifactLocatedFile." .

<realizesAbstractFile/> a owl:ObjectProperty ;
  rdfs:domain <ArtifactLocatedFile/> ;
  rdfs:range <AbstractFile/> ;
  rdfs:label "realizes abstract file" ;
  rdfs:comment "Links an ArtifactLocatedFile to the AbstractFile it realizes (enables navigation without path heuristics)." .

<DatasetSeries/> a rdfs:Class ;
  rdfs:subClassOf <AbstractResource/>, dcat:DatasetSeries ;
  rdfs:label "Dataset series" ;
  rdfs:comment "A series/partitioning of related dataset artifacts." .

<SupportingFlow/> a rdfs:Class ;
  rdfs:subClassOf <Flow/> ;
  rdfs:label "Supporting flow" ;
  rdfs:comment "A non-payload flow used for metadata/inventory/auxiliary artifacts." .

<PayloadFlow/> a rdfs:Class ;
  rdfs:subClassOf <KnopFlow/> ;
  rdfs:label "Payload flow" ;
  rdfs:comment "The primary digital-artifact flow hosted by a Knop." .

<KnopMetadataFlow/> a rdfs:Class ;
  rdfs:subClassOf <SupportingFlow/>, <KnopFlow/> ;
  rdfs:label "Knop metadata flow" ;
  rdfs:comment "Small, discoverable: structure/pointers/summary inventory for the Knop." .

<MeshMetadataFlow/> a rdfs:Class ;
  rdfs:subClassOf <SupportingFlow/>, <MeshFlow/> ;
  rdfs:label "Mesh metadata flow" ;
  rdfs:comment "Optional mesh-level operational metadata/config." .

<NomenMetadataFlow/> a rdfs:Class ;
  rdfs:subClassOf <SupportingFlow/>, <NomenFlow/> ;
  rdfs:label "Nomen metadata flow" ;
  rdfs:comment "Metadata about a Nomen; may remain WorkingSlice-only until history is recorded." .

<hasNomenMetadataFlow/> a owl:ObjectProperty ;
  rdfs:domain <Nomen/> ;
  rdfs:range <NomenMetadataFlow/> ;
  rdfs:label "has nomen metadata flow" ;
  rdfs:comment "Links a Nomen to its nomen metadata flow (if present)." .

<hasPayloadFlow/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <hasFlow/> ;
  rdfs:domain <Knop/> ;
  rdfs:range <PayloadFlow/> ;
  rdfs:label "has payload flow" ;
  rdfs:comment "Links a Knop to its required payload flow." .

<hasSupportingFlow/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <hasFlow/> ;
  rdfs:domain <Knop/> ;
  rdfs:range <SupportingFlow/> ;
  rdfs:label "has supporting flow" ;
  rdfs:comment "Links a Knop to one of its supporting flows." .

<hasKnopMetadataFlow/> a owl:ObjectProperty ;
  rdfs:subPropertyOf <hasSupportingFlow/> ;
  rdfs:domain <Knop/> ;
  rdfs:range <KnopMetadataFlow/> ;
  rdfs:label "has knop metadata flow" ;
  rdfs:comment "Links a Knop to its knop metadata flow (if present)." .

<RdfDataset/> a rdfs:Class ;
  rdfs:subClassOf dcat:Dataset ;
  rdfs:label "RDF dataset" ;
  rdfs:comment "RDF dataset content: default graph + 0..n named graphs; default graph may be empty." .

<RdfGraph/> a rdfs:Class ;
  rdfs:label "RDF graph" ;
  rdfs:comment "RDF graph content: exactly one graph (default graph only; may be empty)." .

<NamedGraph/> a rdfs:Class ;
  rdfs:label "Named graph" ;
  rdfs:comment "A graph identified by a graph-name IRI (interpretation depends on whether you denote a Flow, a HistoricalSlice, or a WorkingSlice)." .

<MeshInventoryDataset/> a rdfs:Class ;
  rdfs:subClassOf <RdfDataset/>, <MeshComponent/> ;
  rdfs:label "Mesh inventory dataset" ;
  rdfs:comment "Optional derived index for explorability at the mesh level (non-flow; may be large/sharded)." .

<KnopInventoryDataset/> a rdfs:Class ;
  rdfs:subClassOf <RdfDataset/>, <KnopComponent/> ;
  rdfs:label "Knop inventory dataset" ;
  rdfs:comment "Optional derived index for explorability at the knop level (non-flow; may be large/sharded)." .

<NomenInventoryDataset/> a rdfs:Class ;
  rdfs:subClassOf <RdfDataset/>, <NomenComponent/> ;
  rdfs:label "Nomen inventory dataset" ;
  rdfs:comment "Optional derived index for explorability at the nomen level (non-flow; may be large/sharded)." .
